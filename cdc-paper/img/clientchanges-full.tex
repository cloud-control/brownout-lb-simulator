\begin{tikzpicture}[scale=0.95,transform shape]
\pgfplotsset{width=0.6\columnwidth,height=3.2cm}
\pgfplotsset{filter discard warning=false}
\pgfplotsset{grid style={dashed}}
\begin{groupplot}
[
group style={
       group name=my plots,
       group size=2 by 11,
       xlabels at=edge bottom,
       xticklabels at=edge bottom,
       ylabels at=edge left,
       yticklabels at=edge left,
       vertical sep=0.25cm,
       horizontal sep=0.5cm},
       ylabel style = {align=center},
xmajorgrids,
ymajorgrids,
xlabel={$t$ [sec]},
xmin=0,xmax=1000,
ymin=-0.05,
ymax= 1.05,
scaled ticks=false,
xtick={0,200,...,1000},
%xticklabel style={font=\footnotesize},
%yticklabel style={font=\footnotesize},
%ytick align=outside,
%xtick align=outside,
]

% index variable
% 0     time
% 1     weight replica 1
% 2     weight replica 2
% 3     weight replica 3
% 4     weight replica 4
% 5     dimmer replica 1
% 6     dimmer replica 2
% 7     dimmer replica 3
% 8     dimmer replica 4
% 9     average latency replica 1
% 10    average latency replica 2
% 11    average latency replica 3
% 12    average latency replica 4
% 13    max latency or nan replica 1
% 14    max latency or nan replica 2
% 15    max latency or nan replica 3
% 16    max latency or nan replica 4
% 17    total number of served requests
% 18    total number of served requests with optional content
% 19    actual weight replica 1
% 20    actual weight replica 2
% 21    actual weight replica 3
% 22    actual weight replica 4


%%%%
% equal-thetas   , 0.81912
% theta-diff-plus, 0.78923
% optimization   , 0.76150
% theta-diff     , 0.73907
% SQF            , 0.67030
% FRF-EWMA       , 0.60826
% 2RC            , 0.51381
% ctl-simplify   , 0.48620
% FRF            , 0.47894
% random         , 0.41218
% RR             , 0.39987
% predictive     , 0.26917
% weighted-RR    , 0.21858

%% 1st row
\nextgroupplot[
title={$w$},
ylabel={{EPBH\\$81.9\%$}}, % equal-thetas
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};

\nextgroupplot[
title={$\theta$},
]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/equal-thetas/sim-lb.csv};


%% 2nd row
\nextgroupplot[
ylabel={{VPBH\\$78.9\%$}}, % theta-diff-plus
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/theta-diff-plus/sim-lb.csv};

%% 3rd row
\nextgroupplot[
ylabel={{OBLB\\$76.2\%$}}, % Optimization
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/optimization/sim-lb.csv};

%% 4th row
\nextgroupplot[
ylabel={{SQF\\$67.0\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/SQF/sim-lb.csv};

%% 5th row
\nextgroupplot[
ylabel={{FRF-EWMA\\$60.8\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/FRF-EWMA/sim-lb.csv};

%% 6th row
\nextgroupplot[
ylabel={{2RC\\$51.4\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/2RC/sim-lb.csv};

%% 7th row
\nextgroupplot[
ylabel={{FRF\\$47.9\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/FRF/sim-lb.csv};

%% 8th row
\nextgroupplot[
ylabel={{Random\\$41.2\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/random/sim-lb.csv};

%% 9th row
\nextgroupplot[
ylabel={{RR\\$40.0\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/RR/sim-lb.csv};

%% 10th row
\nextgroupplot[
ylabel={{Predictive\\$26.9\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/predictive/sim-lb.csv};

%% 11th row
\nextgroupplot[
ylabel={{Weighted-RR\\$21.9\%$}},
]

\addplot[black, thick] table[x index=0,y index=19,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=20,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=21,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=22,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};

\nextgroupplot[]

\addplot[black, thick] table[x index=0,y index=5,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};
\addplot[blue, dashed, thick]  table[x index=0,y index=6,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};
\addplot[green, dashdotted, thick] table[x index=0,y index=7,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};
\addplot[red, dotted, thick]   table[x index=0,y index=8,col sep=comma,each nth point=10]{img/clientchanges-full/weighted-RR/sim-lb.csv};

\end{groupplot}

\end{tikzpicture}

